## 1.（xginx）核心问题：为什么前端请求地址与后端不匹配，但请求能成功？

在项目中，我们经常会遇到这样的情况：

- **前端发出的 API 请求地址**：`http://localhost/api/employee/page`
- **后端服务器实际监听的地址**：`http://localhost:8080/admin/employee/page`

这两个地址明显不同（端口号和路径前缀都不同），但请求却能成功，数据也能正确返回。

**答案：** 因为 Nginx 在中间充当了“中间人”或“交通警察”的角色。这个过程被称为**反向代理**。



### 反向代理工作流程



1. **浏览器视角**：浏览器（前端页面）只知道一个服务器地址 `http://localhost` (默认是 80 端口)。无论是请求页面还是请求 API，它都只与 Nginx 对话。
2. **Nginx 的分发工作**：Nginx 监听 80 端口，接收所有请求。
   - 当请求是 `/` (访问主页) 时，Nginx 根据配置 (`root html/sky;`)，直接从自己的 `html/sky` 文件夹中返回静态页面。
   - 当请求是 `/api/...` 时，Nginx 根据配置 (`location /api/ { proxy_pass ... }`)，**在内部将这个请求转发给真正处理业务的后端服务器** (`http://localhost:8080/admin/...`)。
3. **后端服务器视角**：后端服务器（Tomcat）在 8080 端口接收到 Nginx 转发来的请求，处理完毕后，将响应数据返回给 Nginx。
4. **返回给浏览器**：Nginx 再将从后端拿到的响应数据，原封不动地返回给浏览器。

这个过程对浏览器是完全透明的，它始终认为自己是在和 `localhost:80` 这一个服务器通信。这样做最直接的好处就是**解决了浏览器跨域问题**，因为从浏览器的角度看，页面和 API 的访问地址是同源的（同协议、同域名、同端口）。



## 使用 Nginx 的三大核心优势



您的笔记总结得很好，下面我们对这三点进行详细补充。



### 1. 提高访问速度 (动静分离与缓存)



您提到的“提高访问速度”和“缓存”，在技术上通常被称为**“动静分离”**。

- **静态资源 (静)**：指不会变化的文件，如 HTML、CSS、JavaScript、图片等。Nginx 处理静态资源请求的能力极强，速度飞快，占用服务器资源极少。我们的前端项目 `dist` 包就是静态资源。
- **动态资源 (动)**：指需要后端经过业务逻辑处理和数据库查询才能返回的数据，如员工列表、菜品信息等。这类请求需要消耗更多的 CPU 和内存资源。

**Nginx 的作用：** Nginx 作为入口，将两类请求分离开。它自己直接处理所有静态资源请求，只有动态的 API 请求才会转发给后端相对“笨重”的应用服务器（如 Tomcat）。这大大减轻了后端服务器的压力，提升了网站整体的响应速度。

此外，Nginx 拥有强大的**缓存功能**，可以配置对不经常变化的静态资源或 API 数据进行缓存。当再次收到相同请求时，Nginx 可以直接从缓存中返回数据，而无需再次请求后端，极大地提高了访问速度。



### 2. 负载均衡 (Load Balancing)



这是 Nginx 在大型应用中扮演的关键角色。

当单一后端服务器无法承受所有访问压力时，我们可以启动多个相同的后端服务。Nginx 就可以在前面充当**请求分发器**。

```
# nginx.conf
http {
    # 定义一个后端服务器集群
    upstream webservers {
        server 192.168.1.101:8080;
        server 192.168.1.102:8080;
        server 192.168.1.103:8080;
    }

    server {
        location /api/ {
            # 将请求分发给服务器集群
            proxy_pass http://webservers/admin/;
        }
    }
}
```

**Nginx 的作用：** 将收到的 `/api/` 请求，通过预设的策略（轮询、权重、IP-Hash等）分发给后端的某一台服务器。

- **提高了系统的处理能力 (吞吐量)**：多台服务器一起工作。
- **提高了系统的可用性**：即使其中一台后端服务器宕机，Nginx 会自动将请求转发给其他健康的服务器，服务不会中断。



### 3. 保证后端服务安全 (安全隔离)



这是将后端服务部署在 Nginx 之后带来的一个巨大好处。

- **隐藏后端**：后端应用服务器（如 Tomcat）的 IP 地址和端口号（`8080`）完全不对外暴露。所有外部请求都只能访问 Nginx 的 `80` 端口。攻击者无法直接攻击脆弱的应用服务器。
- **充当安全屏障**：Nginx 本身是一个非常安全和稳定的软件，可以作为第一道防线。我们可以在 Nginx 层配置各种安全策略：
  - **防火墙**：配置只允许特定 IP 地址访问。
  - **HTTPS 加密**：配置 SSL 证书，实现 HTTPS 加密访问，而后端应用可以继续使用简单的 HTTP，降低了开发复杂度。
  - **访问控制**：对恶意请求、爬虫等进行拦截。
  - **限流**：防止恶意的高频次请求（DDoS 攻击）。

通过 Nginx 作为代理，我们的后端服务可以更安全地“躲”在内网中，专注于处理核心的业务逻辑。











接口管理

接口  管理平台          yapi

swagger  可以生成接口文档   knife4j 把它封装   

通过解析目标路径的请求，用反射获取信息，





yapi 用于设计阶段，管理维护

swagger  在开发阶段， 帮助后端测试接口







swagger的注解说明


@Api
用在类上，例如Controller,表示对类的说明
@ApiModel
用在类上，例如entity、DTO、vo
@ApiModelProperty
用在属性上，描述属性信息
@ApiOperation
用在方法上，例如Controller的方法，说明方法的用途、作用



加入注解后届时 会把所添加的注释信息添加在web页面上













mybatis的使用

service 层调用  IOC容器中的 mapper实例



实例创建抽象方法

在xml编写或者 注解写sql语句

